{% load static %}
<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>{{title}}</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/cover/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <style>
        * {
            color: black;
        }

        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        #hero {
            background-image: url(https://soto.house.gov/sites/soto.house.gov/files/styles/congress_featured_image/public/featured_image/Retina_Display-758591537.jpg?itok=6xeGJ4HM);
            filter: brightness(70%);
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .bg-primary,
        .btn-primary {
            background-color: #103847 !important;
        }

        .border-primary,
        .btn-primary {
            border-color: #103847 !important;
        }

        #nav {
            width: 100%;
            height: 65vh;
            line-height: 2em;
            border: 1px solid #ccc;
            padding: 0;
            margin: 0;
            overflow: scroll;
            overflow-x: hidden;
        }

        ul ul {
            text-indent: 1em;
        }

        ul ul ul {
            text-indent: 2em;
        }
    </style>

</head>

<body class="d-flex flex-column text-center text-white">

    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">{{home}}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#stats">{{stats}}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#explorer">{{explorer}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section id="hero" class="cover-container d-flex w-100 vh-100 p-3 mx-auto flex-column">
        <header class="mb-auto">
        </header>

        <main class="px-3">
            <h1 class="text-white">{{cover_header}}</h1>
            <p class="lead text-white">{{cover_body}} <a href="https://docs.etherscan.io/" class="text-white"
                    target="_blank">etherscan.io</a></p>
            <p class="lead">
                <a href="#stats"
                    class="text-black btn btn-lg btn-secondary fw-bold border-white bg-white">{{main_cta}}</a>
            </p>
        </main>

        <footer class="mt-auto">
            <p class="text-white">by <a href="https://www.linkedin.com/in/fjbrun/" class="text-white"
                    target="_blank">Federico Brun</a>
                &copy {%now "Y"%}</p>
        </footer>
    </section>


    <section class="row p-5 row-cols-1 row-cols-md-3 mb-3 d-flex justify-content-center align-items-center">

        <div class="col">
            <div class="card mb-4 rounded-3 shadow-sm border-primary">
                <div class="card-header py-3 bg-primary border-primary">
                    <h4 class="my-0 fw-normal text-white">Total Blocks</h4>
                </div>
                <div class="card-body">
                    <h1 class="card-title pricing-card-title">{{latest_mined_block}}</h1>
                    <small class="text-muted fw-light">{{latst_block_tx_count}} txns in last block</small>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-4 rounded-3 shadow-sm border-primary">
                <div class="card-header py-3 bg-primary border-primary">
                    <h4 class="my-0 fw-normal text-white">ETH Last Price (USD)</h4>
                </div>
                <div class="card-body">
                    <h1 class="card-title pricing-card-title">$ {{eth_usd}}</h1>
                    <small class="text-muted fw-light">@ {{eth_btc}} BTC</small>
                </div>
            </div>
        </div>
    </section>
    <section id="stats">
        <h2 class="display-6 text-center mb-4 mt-5 text-black ">{{stats}}</h2>
        <p class="lead">{{stats_body}}</p>
        <div class="row m-auto d-block container d-flex justify-content-center align-items-center">
            <div class="col-4 h-100">
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm border-primary">
                        <div class="card-header py-3 bg-primary border-primary">
                            <h6 class="my-0 fw-normal text-white">Block Num</h6>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title pricing-card-title">{{latest_mined_block}}</h6>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm border-primary">
                        <div class="card-header py-3 bg-primary border-primary">
                            <h6 class="my-0 fw-normal text-white">Difficulty</h6>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title pricing-card-title">{{difficulty}}</h6>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm border-primary">
                        <div class="card-header py-3 bg-primary border-primary">
                            <h6 class="my-0 fw-normal text-white">Miner</h6>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title pricing-card-title">{{miner}}</h6>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-8">
                {% if block_tx_list %}
                <ul id="nav" class="list-group">
                    {% for tx in block_tx_list %}
                    <li class="list-group-item">
                        <p>
                            Tx: {{tx.hash}}
                            {% load humanize %}
                            <br>Amount: {{ tx.value }} wei
                            <br>From: {{tx.from}} 
                            <br>To: {{tx.to}}
                        </p>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="alert alert-info w-100">
                    {{address_error}}
                </div>
                {% endif %}
            </div>

        </div>

    </section>

    <div id="explorer"></div>

    <h2 class="display-6 text-center mb-4 mt-5 text-black ">{{explorer}}</h2>

    <p class="lead">{{explorer_body}}</p>

    <form method="POST" action="" class="row p-5">
        {% csrf_token %}
        <div class="form-group  d-flex flex-row align-items-center justify-content-lg-between">
            <input type="text" name="address" class="form-control"
                placeholder="Example: 0xddbd2b932c763ba5b1b7ae3b362eac3e8d40121a">

            <button type="submit" class="ms-3 btn btn-primary">{{search}}</button>
            </button>
        </div>
    </form>

    <section class="row px-5 row-cols-1 row-cols-md-3 mb-3 text-center">

        {% if block_tx_list %}
        <ul class="list-group">
            {% for tx in block_tx_list %}
            <li class="list-group-item">
                {{tx}}
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="alert alert-info w-100">
            {{address_error}}
        </div>
        {% endif %}
    </section>


</body>

</html>